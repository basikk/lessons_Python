<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Курс Python 9 клас | Головна</title>
<link rel="stylesheet" href="css/style.css">
<style>
body { font-family: Arial, sans-serif; max-width: 1000px; margin: 20px auto; line-height: 1.6; }
h1, h2, h3 { color: #2c3e50; }
input[type="email"] { width: 300px; padding: 5px; margin-right: 10px; }
button { padding: 6px 12px; cursor: pointer; }
#lessons ul { list-style: none; padding: 0; }
#lessons li { margin-bottom: 8px; }
.progress-bar { width: 100%; background: #f1f1f1; border-radius: 6px; overflow: hidden; height: 20px; margin-top: 10px; }
.progress-fill { height: 100%; background: #2ecc71; width: 0%; text-align: center; color: white; line-height: 20px; font-weight: bold; }
</style>
</head>
<body>

<h1>Курс Python для 9 класу</h1>

<!-- Логін учня -->
<div id="login">
    <h2>Вхід учня</h2>
    <input type="email" id="email" placeholder="Введіть email">
    <button onclick="loginStudent()">Увійти</button>
</div>

<!-- Список уроків та прогрес -->
<div id="lessons" style="display:none;">
    <h2>Уроки</h2>
    <ul>
        <li><a href="lessons/lesson1.html">Урок 1: Змінні та типи даних</a></li>
        <li><a href="lessons/lesson2.html">Урок 2: Лінійні алгоритми</a></li>
        <li><a href="lessons/lesson3.html">Урок 3: Алгоритми розгалужень</a></li>
    </ul>

    <h3>Загальний прогрес курсу</h3>
    <div class="progress-bar">
        <div class="progress-fill" id="course-progress">0%</div>
    </div>
</div>

<script src="js/course.js"></script>
<script>
function loginStudent() {
    const email = document.getElementById("email").value.trim().toLowerCase();
    if (!email) { alert("Введіть email!"); return; }
    localStorage.setItem("currentStudent", email);
    if (!localStorage.getItem(`student_${email}`)) {
        localStorage.setItem(`student_${email}`, JSON.stringify({}));
    }
    location.reload();
}

function getCurrentStudent() {
    const email = localStorage.getItem("currentStudent");
    if (!email) { return null; }
    return email;
}

// Показ уроків та прогрес після логіну
const current = getCurrentStudent();
if (current) {
    document.getElementById("login").style.display = "none";
    document.getElementById("lessons").style.display = "block";

    const studentData = JSON.parse(localStorage.getItem(`student_${current}`)) || {};
    const lessons = ["lesson1","lesson2","lesson3"];
    let totalTasks = 0;
    let completedTasks = 0;
    lessons.forEach(l => {
        const p = studentData[l];
        if (p) completedTasks += p.completedTasks || 0;
        totalTasks += p ? p.totalTasks : 1;
    });
    const percent = Math.round((completedTasks / totalTasks) * 100);
    const progressEl = document.getElementById("course-progress");
    progressEl.style.width = percent + "%";
    progressEl.textContent = percent + "%";
}
</script>

</body>
</html>

